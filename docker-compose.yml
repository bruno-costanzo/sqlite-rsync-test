services:
  storage:
    build:
      context: .
      dockerfile: Dockerfile.storage
    volumes:
      - sqlite-data:/data

  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - SECRET_KEY_BASE=test123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456
      - SQLITE_REMOTE=sqlsync@storage:/data/production.sqlite3
    depends_on:
      - storage

volumes:
  sqlite-data:
